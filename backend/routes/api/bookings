const express = require('express')

const {check} = require('express-validator')
const {handleValidationErrors } = require('../../utils/validation.js');
const {requireAuth, restoreUser} = require('../../utils/auth.js');
const {User, Spot, SpotImage, Review, ReviewImage, Booking, Sequelize} = require("../../db/models");

const router = express.Router();

//get all current user's bookings
router.get('/current', requireAuth, async(req, res, next) => {
    const {user} = req;

    const book = await Booking.findAll({
        where: {userId: user.id},
        include:[
            {
                model: Spot,
                attributes: ['id', 'ownerId', 'city', 'state', 'country', 'lat', 'lng', 'name', 'price', 'previewImage']
            }
        ]
    })
})


module.exports = router